CREATE TABLE "foods_nutrition" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "nutrients" text NULL CHECK ((JSON_VALID("nutrients") OR "nutrients" IS NULL)), "properties" text NULL CHECK ((JSON_VALID("properties") OR "properties" IS NULL)), "flavonoids" text NULL CHECK ((JSON_VALID("flavonoids") OR "flavonoids" IS NULL)), "percent_protein" real NULL, "percent_fat" real NULL, "percent_carbs" real NULL, "weight_per_serving" text NULL CHECK ((JSON_VALID("weight_per_serving") OR "weight_per_serving" IS NULL)))
CREATE TABLE "foods_ingredient" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "spoonacular_id" integer NULL UNIQUE, "original" varchar(255) NULL, "originalName" varchar(255) NULL, "name" varchar(255) NULL, "amount" real NULL, "unit" varchar(50) NULL, "unitShort" varchar(50) NULL, "unitLong" varchar(50) NULL, "possibleUnits" text NULL CHECK ((JSON_VALID("possibleUnits") OR "possibleUnits" IS NULL)), "estimatedCost_value" real NULL, "estimatedCost_unit" varchar(50) NULL, "consistency" varchar(50) NULL, "shoppingListUnits" text NULL CHECK ((JSON_VALID("shoppingListUnits") OR "shoppingListUnits" IS NULL)), "aisle" varchar(255) NULL, "image" varchar(200) NULL, "meta" text NULL CHECK ((JSON_VALID("meta") OR "meta" IS NULL)), "categoryPath" text NULL CHECK ((JSON_VALID("categoryPath") OR "categoryPath" IS NULL)), "nutrition_id" bigint NOT NULL UNIQUE REFERENCES "foods_nutrition" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "foods_recipe_ingredients" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "recipe_id" bigint NOT NULL REFERENCES "foods_recipe" ("id") DEFERRABLE INITIALLY DEFERRED, "ingredient_id" bigint NOT NULL REFERENCES "foods_ingredient" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "profiles_allergies" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL, "description" text NULL, "user_id" integer NOT NULL REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "profiles_userprofile" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "username" varchar(25) NOT NULL UNIQUE, "password" varchar(85) NOT NULL, "gender" varchar(50) NOT NULL, "email" varchar(50) NOT NULL UNIQUE, "weight" real NOT NULL, "height" real NOT NULL, "date_of_birth" date NOT NULL, "profile_picture" varchar(100) NULL, "activityLevel" integer unsigned NOT NULL CHECK ("activityLevel" >= 0))
CREATE TABLE "profiles_userprofile_saved_recipes" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "userprofile_id" bigint NOT NULL REFERENCES "profiles_userprofile" ("id") DEFERRABLE INITIALLY DEFERRED, "recipe_id" bigint NOT NULL REFERENCES "foods_recipe" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "profiles_userfitnessprofile" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "goal" varchar(10) NOT NULL, "daily_calorie_intake_goal" integer unsigned NOT NULL CHECK ("daily_calorie_intake_goal" >= 0), "daily_protein_goal" real NOT NULL, "daily_fat_goal" real NOT NULL, "daily_carbohydrate_goal" real NOT NULL, "activity_level" integer unsigned NOT NULL CHECK ("activity_level" >= 0), "user_profile_id" bigint NOT NULL UNIQUE REFERENCES "profiles_userprofile" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "foodintake_foodintake" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "meal_type" varchar(20) NOT NULL, "date" date NOT NULL, "profile_id" bigint NOT NULL REFERENCES "profiles_userprofile" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "food_intake_nutritionstats" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "last_week_calories" real NULL, "last_week_fat" real NULL, "last_week_saturated_fat" real NULL, "last_week_carbohydrates" real NULL, "last_week_sugar" real NULL, "last_week_protein" real NULL, "last_week_cholesterol" real NULL, "last_week_sodium" real NULL, "last_week_fiber" real NULL, "last_week_vitamin_c" real NULL, "last_week_manganese" real NULL, "last_week_folate" real NULL, "last_week_potassium" real NULL, "last_week_magnesium" real NULL, "last_week_vitamin_a" real NULL, "last_week_vitamin_b6" real NULL, "last_week_vitamin_b12" real NULL, "last_week_vitamin_d" real NULL, "last_week_calcium" real NULL, "last_week_iron" real NULL, "last_week_zinc" real NULL, "last_week_vitamin_e" real NULL, "last_week_vitamin_k" real NULL, "last_week_omega_3" real NULL, "last_week_omega_6" real NULL, "last_30_days_calories" real NULL, "last_30_days_fat" real NULL, "last_30_days_saturated_fat" real NULL, "last_30_days_carbohydrates" real NULL, "last_30_days_sugar" real NULL, "last_30_days_protein" real NULL, "last_30_days_cholesterol" real NULL, "last_30_days_sodium" real NULL, "last_30_days_fiber" real NULL, "last_30_days_vitamin_c" real NULL, "last_30_days_manganese" real NULL, "last_30_days_folate" real NULL, "last_30_days_potassium" real NULL, "last_30_days_magnesium" real NULL, "last_30_days_vitamin_a" real NULL, "last_30_days_vitamin_b6" real NULL, "last_30_days_vitamin_b12" real NULL, "last_30_days_vitamin_d" real NULL, "last_30_days_calcium" real NULL, "last_30_days_iron" real NULL, "last_30_days_zinc" real NULL, "last_30_days_vitamin_e" real NULL, "last_30_days_vitamin_k" real NULL, "last_30_days_omega_3" real NULL, "last_30_days_omega_6" real NULL, "profile_id" bigint NOT NULL REFERENCES "profiles_userprofile" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "food_intake_userdaily" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "date" date NOT NULL, "total_nutrients" text NULL CHECK ((JSON_VALID("total_nutrients") OR "total_nutrients" IS NULL)), "total_properties" text NULL CHECK ((JSON_VALID("total_properties") OR "total_properties" IS NULL)), "total_flavonoids" text NULL CHECK ((JSON_VALID("total_flavonoids") OR "total_flavonoids" IS NULL)), "total_caloric_breakdown" text NULL CHECK ((JSON_VALID("total_caloric_breakdown") OR "total_caloric_breakdown" IS NULL)), "total_weight_per_serving" text NULL CHECK ((JSON_VALID("total_weight_per_serving") OR "total_weight_per_serving" IS NULL)), "profile_id" bigint NULL REFERENCES "profiles_userprofile" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "django_session" ("session_key" varchar(40) NOT NULL PRIMARY KEY, "session_data" text NOT NULL, "expire_date" datetime NOT NULL)
CREATE TABLE "token_blacklist_blacklistedtoken" ("blacklisted_at" datetime NOT NULL, "token_id" bigint NOT NULL UNIQUE REFERENCES "token_blacklist_outstandingtoken" ("id") DEFERRABLE INITIALLY DEFERRED, "id" integer NOT NULL PRIMARY KEY AUTOINCREMENT)
CREATE TABLE "token_blacklist_outstandingtoken" ("token" text NOT NULL, "created_at" datetime NULL, "expires_at" datetime NOT NULL, "user_id" integer NULL REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED, "jti" varchar(255) NOT NULL UNIQUE, "id" integer NOT NULL PRIMARY KEY AUTOINCREMENT)
CREATE TABLE "food_intake_foodintakedetail" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "amount" integer NOT NULL, "food_intake_id" bigint NOT NULL REFERENCES "foodintake_foodintake" ("id") DEFERRABLE INITIALLY DEFERRED, "recipe_id" bigint NOT NULL REFERENCES "foods_recipe" ("id") DEFERRABLE INITIALLY DEFERRED)
CREATE TABLE "foods_recipe" ("title" varchar(100) NOT NULL, "image" varchar(600) NOT NULL, "servings" integer NULL, "readyInMinutes" integer NULL, "spoonacular_id" integer NULL UNIQUE, "sourceName" varchar(100) NOT NULL, "sourceUrl" varchar(600) NOT NULL, "healthScore" real NULL, "spoonacularScore" real NULL, "pricePerServing" real NULL, "analyzedInstructions" text NULL CHECK ((JSON_VALID("analyzedInstructions") OR "analyzedInstructions" IS NULL)), "cheap" bool NULL, "creditsText" text NULL, "cuisines" text NULL CHECK ((JSON_VALID("cuisines") OR "cuisines" IS NULL)), "dairyFree" bool NULL, "diets" text NULL CHECK ((JSON_VALID("diets") OR "diets" IS NULL)), "gaps" varchar(10) NULL, "glutenFree" bool NULL, "instructions" text NULL, "ketogenic" bool NULL, "lowFodmap" bool NULL, "occasions" text NULL CHECK ((JSON_VALID("occasions") OR "occasions" IS NULL)), "sustainable" bool NULL, "vegan" bool NULL, "vegetarian" bool NULL, "veryHealthy" bool NULL, "veryPopular" bool NULL, "whole30" bool NULL, "weightWatcherSmartPoints" integer NULL, "dishTypes" text NULL CHECK ((JSON_VALID("dishTypes") OR "dishTypes" IS NULL)), "extendedIngredients" text NULL CHECK ((JSON_VALID("extendedIngredients") OR "extendedIngredients" IS NULL)), "summary" text NULL, "winePairing" text NULL CHECK ((JSON_VALID("winePairing") OR "winePairing" IS NULL)), "nutrition_id" bigint NOT NULL UNIQUE REFERENCES "foods_nutrition" ("id") DEFERRABLE INITIALLY DEFERRED, "id" integer NOT NULL PRIMARY KEY)